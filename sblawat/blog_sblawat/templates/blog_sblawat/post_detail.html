{% extends 'blog_sblawat/base.html' %}
{% load static %}

{% block tytul_strony %}{{ post.title }} - Blog Szymona Blawata{% endblock %}

{% block zawartosc %}
    <article class="mb-5">
        <h1>ğŸ“„ {{ post.title }}</h1>
        <p class="text-muted">ğŸ•’ {{ post.created_at|date:"d-m-Y H:i" }} | ğŸ‘ï¸ {{ post.views }}</p>
        <div>{{ post.content }}</div>

        <!-- Przycisk polubienia -->
        <form method="POST" action="{% url 'polub_post' post.pk %}" class="mt-3">
            {% csrf_token %}
            <button class="btn btn-primary btn-sm">ğŸ‘ Polub ({{ post.likes_count }})</button>
        </form>
    </article>

    <hr>

    <!-- Komentarze -->
    <section>
        <h3>ğŸ’¬ Komentarze</h3>
        {% for komentarz in komentarze %}
            <div class="border rounded p-2 mb-3 bg-black shadow-sm">
                <strong>ğŸ‘¤ {{ komentarz.autor }}</strong> napisaÅ‚:
                <p>{{ komentarz.tresc }}</p>
                <small class="text-muted">ğŸ•’ {{ komentarz.created_at|date:"d-m-Y H:i" }}</small>
            </div>
        {% empty %}
            <p>ğŸ˜¶ Brak komentarzy.</p>
        {% endfor %}

        <!-- Dodaj komentarz -->
        <h4 class="mt-4">â• Dodaj komentarz</h4>
        <form method="POST" action="{% url 'dodaj_komentarz' post.pk %}">
            {% csrf_token %}
            <div class="mb-2">
                <label for="autor">ğŸ‘¤ Twoje imiÄ™</label>
                <input type="text" name="autor" id="autor" class="form-control" required>
            </div>
            <div class="mb-2">
                <label for="tresc">ğŸ“ TreÅ›Ä‡</label>
                <textarea name="tresc" id="tresc" rows="3" class="form-control" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary btn-sm">ğŸ’¾ Dodaj komentarz</button>
        </form>
    </section>
{% endblock %}
